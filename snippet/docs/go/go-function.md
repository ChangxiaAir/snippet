
函数
===

## 1、参数

（1）当两个或多个连续的函数命名参数（包括返回值参数列表）是同一类型时，除了最后一个类型外，其他都可以省略。如：
```go
func add(x, y int) int { return x + y }
```

（2）Go中的参数传递都是`值传递`，即函数如果要修改实参的值，实参必须是个指针变量。


## 2、返回值

（1）函数可以返回**`任意数量`**的返回值。

（2）命名返回值：

函数返回值接受参数。在Go中，函数可以返回多个“`结果参数`”，而不仅仅是一个值。而且，它们可以像变量那样命名和使用。

如果命名了返回值参数，一个没有参数的 `return` 语句会将当前的值作为返回值返回。如：
```go
func split(sum int) (x, y int) {
    x = sum * 4 / 9
    y = sum - x
    return
}
```


## 3、表达式语句

可以出现在`语句上下文`中的函数（包括内建函数）或方法调用以及接收操作叫做`表达式语句`，即该函数或方法调用等操作可以独立成为一个语句；它们可以被`parenthesized`。

但是有部分内建函数的调用不能用于语句上下文中，即它们不能独立成为一个语句，它们必须放到其它语句（如赋值语句）中。这些内建函数有：

    append   cap   complex     imag    len      make   new
    real     unsafe.Alignof    unsafe.Offsetof  unsafe.Sizeof


## 4、函数支持度

### 不支持
`嵌套(nested)`、`重载（overload）` 和 `默认参数(default parameters)`。

### 支持
`无需声明原型`、`不定长度变参`、`多返回值`、`命名返回值参数`、`匿名函数`、`闭包`。

### 不定长度变参
Go函数支持`不定长度变参`(也叫`可变参数`)，其方式是：在定义函数时，将`最后一个形参`(假设为 p )的类型设置为 `...T` (其真实类型为 `[]T`)即可。

当调用可变长度参数函数时，对于形参 p，如果没有实现的参数传递，则它的值为 `nil`；否则，它的值是一个新的、类型为`[]T`的`slice`，它的底层表示是一个包含所有实际参数的新数组，并且该slice的长度和容量是绑定到形参p的参数的个数（由此可知，长度和容量应该是一样的），因此，该长度和容量因每次函数调用而不同。我们可以形象地认为，多余的、变化的参数被收集到一个slice中了。

如果最后一个参数是可赋值给类型为`[]T`的分片，那么，只要在该参数后面添加`...`标识，该参数可以不变地作为值传递给`不定长度变参`，即形参p，此时，没有新的 slice 被创建。也即是说，如果最后一个参数也是`[]T`类型的`slice`，它可以直接传递给形参p，只要它的后面添加`...`标识。

```go
func Greet(prefix string, who ...string) {
    // Do something
}

Greet("nobody")                             // who => nil
Greet("Hello:", "Joe", "Anna", "Eileen")    // who => []string{"Joe", "Anna", "Eileen"}

s := []string{"James", "Aaron"}
Greet("Goodbye:", s...)                     // who => s
```
